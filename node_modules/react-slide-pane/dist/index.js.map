{"version":3,"file":"index.js","sources":["../src/Resizer.tsx","../src/SlidePane.tsx"],"sourcesContent":["/** @jsx jsx */\r\nimport { jsx, css } from '@emotion/core'\r\nimport React, { CSSProperties, MouseEvent, TouchEvent } from 'react'\r\n\r\nexport const RESIZER_DEFAULT_CLASSNAME = 'Resizer'\r\n\r\nexport type Split = 'vertical' | 'horizontal'\r\n\r\nexport type ResizerProps = {\r\n  className: string\r\n  onClick?: (event: MouseEvent) => void\r\n  onDoubleClick?: (event: MouseEvent) => void\r\n  onMouseDown: (event: MouseEvent) => void\r\n  onMouseUp: (event: MouseEvent) => void\r\n  onTouchStart: (event: TouchEvent) => void\r\n  onTouchEnd: (event: TouchEvent) => void\r\n  split?: Split\r\n  style?: CSSProperties\r\n  resizerClassName: string\r\n}\r\n\r\nexport default function Resizer({\r\n  className,\r\n  onClick,\r\n  onDoubleClick,\r\n  onMouseDown,\r\n  onMouseUp,\r\n  onTouchEnd,\r\n  onTouchStart,\r\n  resizerClassName = RESIZER_DEFAULT_CLASSNAME,\r\n  split,\r\n  style\r\n}: ResizerProps) {\r\n  const classes = [resizerClassName, split, className]\r\n\r\n  const ResizerCSS = css`\r\n    height: 100%;\r\n    margin: 0 -5px;\r\n    border-left: 5px solid rgba(255, 255, 255, 0);\r\n    border-right: 5px solid rgba(255, 255, 255, 0);\r\n    cursor: col-resize;\r\n    background: #000;\r\n    opacity: 0.2;\r\n    z-index: 1;\r\n    background-clip: padding-box;\r\n    position: absolute;\r\n  `\r\n\r\n  return (\r\n    <span\r\n      role=\"presentation\"\r\n      className={classes.join(' ')}\r\n      css={ResizerCSS}\r\n      style={style}\r\n      onMouseDown={onMouseDown}\r\n      onMouseUp={onMouseUp}\r\n      onTouchStart={event => {\r\n        event.preventDefault()\r\n        onTouchStart(event)\r\n      }}\r\n      onTouchEnd={event => {\r\n        event.preventDefault()\r\n        onTouchEnd(event)\r\n      }}\r\n      onClick={event => {\r\n        if (onClick) {\r\n          event.preventDefault()\r\n          onClick(event)\r\n        }\r\n      }}\r\n      onDoubleClick={event => {\r\n        if (onDoubleClick) {\r\n          event.preventDefault()\r\n          onDoubleClick(event)\r\n        }\r\n      }}\r\n    />\r\n  )\r\n}\r\n","/** @jsx jsx */\r\nimport { jsx, css } from '@emotion/core'\r\nimport React, {\r\n  ReactElement,\r\n  MouseEvent,\r\n  TouchEvent,\r\n  CSSProperties,\r\n  useState,\r\n  useRef\r\n} from 'react'\r\nimport { useRect } from '@reach/rect'\r\nimport Resizer from './Resizer'\r\n\r\nexport type Size = string | number\r\n\r\nexport type Split = 'vertical' | 'horizontal'\r\n\r\nexport type SlidePaneProps = {\r\n  onResizerClick?: (e: MouseEvent) => void\r\n  onResizerDoubleClick?: (e: MouseEvent) => void\r\n  split?: Split\r\n  initial?: Size\r\n  width: number\r\n  height: number\r\n  children: Array<ReactElement>\r\n  resizerStyle?: CSSProperties\r\n}\r\n\r\nexport default function SlidePane({\r\n  onResizerClick,\r\n  onResizerDoubleClick,\r\n  split = 'vertical',\r\n  initial = 200,\r\n  width = 600,\r\n  height = 400,\r\n  children,\r\n  resizerStyle\r\n}: SlidePaneProps) {\r\n  // your own ref\r\n  const ref = useRef(null)\r\n  // pass it in to be observered\r\n  const rect = useRect(ref)\r\n\r\n  const x = rect ? rect.x : 0\r\n  const w = rect ? rect.width : width\r\n  const h = rect ? rect.height : height\r\n  let initialPosition: number\r\n  if (typeof initial === 'number') {\r\n    initialPosition = initial\r\n  } else if (typeof initial === 'string' && initial.includes('px')) {\r\n    initialPosition = Number(initial.split('px')[0])\r\n  } else if (typeof initial === 'string' && initial.includes('%')) {\r\n    initialPosition = w * Number(initial.split('%')[0]) * 0.01\r\n  } else {\r\n    initialPosition = 200\r\n  }\r\n  const initialResizerWidth = 10\r\n\r\n  const [isResizing, setIsResizing] = useState(false)\r\n  const [position, setPosition] = useState(\r\n    initialPosition - initialResizerWidth\r\n  )\r\n\r\n  const onMouseDown = (event: MouseEvent) => setIsResizing(true)\r\n  const onMouseUp = (event: MouseEvent) => setIsResizing(false)\r\n\r\n  const onMouseMove = (event: MouseEvent) => {\r\n    if (isResizing) {\r\n      setPosition(event.clientX - x - initialResizerWidth)\r\n    }\r\n  }\r\n  const onMouseLeave = (event: MouseEvent) => setIsResizing(false)\r\n\r\n  const onTouchStart = (event: TouchEvent) => console.log('onTouchStart', event)\r\n  const onTouchEnd = (event: TouchEvent) => console.log('onTouchEnd', event)\r\n\r\n  const [notNullChildren, notNullChildren2] = React.Children.toArray(children)\r\n\r\n  const SlidePaneCSS = css`\r\n    position: relative;\r\n    overflow: hidden;\r\n    width: ${w}px;\r\n    height: ${h}px;\r\n    user-select: none;\r\n  `\r\n\r\n  const PaneCSS = css`\r\n    position: absolute;\r\n  `\r\n\r\n  const PaneFrontCSS = css`\r\n    position: absolute;\r\n    right: ${w - position}px;\r\n  `\r\n\r\n  const PaneFrontBoxCSS = css`\r\n    width: ${position}px;\r\n    overflow: hidden;\r\n  `\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div\r\n        data-type=\"slide-pane\"\r\n        ref={ref}\r\n        css={SlidePaneCSS}\r\n        onMouseMove={onMouseMove}\r\n        onMouseLeave={onMouseLeave}\r\n      >\r\n        <div data-type=\"pane\" css={PaneCSS}>\r\n          {notNullChildren}\r\n        </div>\r\n        <Resizer\r\n          className=\"test\"\r\n          onClick={onResizerClick}\r\n          onDoubleClick={onResizerDoubleClick}\r\n          onMouseDown={onMouseDown}\r\n          onMouseUp={onMouseUp}\r\n          onTouchStart={onTouchStart}\r\n          onTouchEnd={onTouchEnd}\r\n          key=\"resizer\"\r\n          resizerClassName=\"resizer\"\r\n          split={split}\r\n          style={{\r\n            left: position,\r\n            width: initialResizerWidth,\r\n            ...resizerStyle\r\n          }}\r\n        />\r\n        <div data-type=\"pane-front\" css={PaneFrontCSS}>\r\n          <div data-type=\"pane-front-box\" css={PaneFrontBoxCSS}>\r\n            {notNullChildren2}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </React.Fragment>\r\n  )\r\n}\r\n"],"names":["css","jsx","useRef","rect","useRect","useState","React"],"mappings":"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"}